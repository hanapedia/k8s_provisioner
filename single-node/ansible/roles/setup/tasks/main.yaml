# vim: set filetype=yaml.ansible :
# - name: wait for connection
#   ansible.builtin.pause:
#     seconds: 10

- name: Upgrade the OS (apt-get dist-upgrade)
  ansible.builtin.apt:
    upgrade: dist

- name: Update all packages to their latest version
  ansible.builtin.apt:
    name: "*"
    state: latest

- name: Install required packages
  ansible.builtin.apt:
    name: "{{ os_packages }}"
    state: present
#
# - name: Extract facts from setup
#   ansible.builtin.setup:
#   register: machine_facts
#
# - name: set facts
#   ansible.builtin.set_fact:
#     host_ip: "{{ machine_facts.ansible_facts.ansible_default_ipv4.address }}"
#     host_interface: "{{ machine_facts.ansible_facts.ansible_default_ipv4.interface }}"
#     host_mac: "{{ machine_facts.ansible_facts.ansible_default_ipv4.macaddress }}"
#     host_fqdn: "{{ machine_facts.ansible_facts.ansible_fqdn }}"
#     cacheable: true
#
# - name: read facts
#   ansible.builtin.debug:
#     msg: "{{ ansible_facts[host_ip] }}"
